<html>
  <head>
    <title>Vim Recipes: Table of Contents</title>
    <link rel="stylesheet" type="text/css" href="/css/style.css"/>
  </head>
  <body>
    <form action="http://www.google.com/cse">
      <div>
        <input type="hidden" name="cx" value="012927387456573046134:nfygyscsu3q">
        <input type="hidden" name="ie" value="UTF-8">&nbsp;
        <input name="q" size="25">&nbsp;
        <input type="submit" name="root" value="Search">
      </div>
    </form>
    <p><a href="/">Vim Recipes</a> <span>&#8227;</span> <i>Table of
      Contents</i></p>
    <h1>Table of Contents</h1>
    <ul>
      <% 
      @in_sec = false
      toc.each do |entry|
        if (entry[:type] == :section)
          if (@in_sec)
      %>
            </ul>
          </li>
     <%   end
     %>
            <li><h2><%= entry[:title] %></h2>
              <ul>
     <%   @in_sec = true                 
        else %>
                <li><a href="/<%= entry[:section_id] %>/<%= entry[:id] %>/"><%= entry[:title] %></a></li>
     <% end           
     end %>
    </ul>   
  </body>
</html>    
